import{u as e,r as s,j as a,L as l}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";const n=()=>{const n=e(),[i,t]=s.useState({email:"",password:""}),[o,r]=s.useState(""),[c,d]=s.useState(!1),m=e=>{t({...i,[e.target.name]:e.target.value})};return a.jsx("div",{className:"login-container",children:a.jsx("div",{className:"login-image",children:a.jsx("div",{className:"login",children:a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r(""),i.email&&i.password){d(!0);try{const e=await fetch("https://padel-hnj9.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),credentials:"include"});if(!e.ok){const s=await e.json();return r(s.message||"البريد الإلكتروني أو كلمة المرور غير صحيحة."),void d(!1)}const s=await e.json();localStorage.setItem("token",s.token),localStorage.setItem("role",s.role),localStorage.setItem("userId",s.userId),"admin"===s.role?n("/@!admindash"):"user"===s.role&&n("/@!home")}catch(s){r("حدث خطأ أثناء تسجيل الدخول. الرجاء المحاولة لاحقًا.")}finally{d(!1)}}else r("الرجاء إدخال البريد الإلكتروني وكلمة المرور.")},className:"login-form",children:[a.jsx("span",{className:"login-title",children:"تسجيل الدخول إلى منصة بادِل"}),a.jsx("p",{className:"login-subtext",children:"أهلاً بك من جديد! الرجاء إدخال بيانات حسابك للمتابعة."}),o&&a.jsx("p",{className:"error-message",children:o}),a.jsx("div",{className:"login-input",children:a.jsx("input",{type:"email",name:"email",placeholder:"example@email.com",value:i.email,onChange:m,autoComplete:"email"})}),a.jsx("div",{className:"login-input",children:a.jsx("input",{type:"password",name:"password",placeholder:"••••••••",value:i.password,onChange:m,autoComplete:"current-password"})}),a.jsxs("div",{className:"login-links",children:[a.jsx(l,{to:"/@!register",className:"login-link",children:"إنشاء حساب جديد"}),a.jsx(l,{to:"/@!forgotpassword",className:"login-link",children:"هل نسيت كلمة المرور؟"})]}),a.jsx("div",{className:"login-button",children:a.jsx("input",{type:"submit",value:c?"جاري تسجيل الدخول...":"تسجيل الدخول",disabled:c})}),a.jsxs("p",{className:"login-note",children:["باستخدامك المنصة، فإنك توافق على ",a.jsx(l,{to:"/@!terms",children:"الشروط والأحكام"}),"."]})]})})})})};export{n as default};
