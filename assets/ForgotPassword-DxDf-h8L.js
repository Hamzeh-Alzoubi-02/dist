import{r as e,j as a,e as s}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";const t=()=>{const[t,o]=e.useState(""),[n,r]=e.useState(""),[l,i]=e.useState(""),[p,c]=e.useState(1),[d,u]=e.useState("");return a.jsx("div",{className:"container-forgot-password-main",children:a.jsxs("div",{className:"container-forgot-password",children:[a.jsx("h2",{className:"forgot-password-title",children:"إعادة تعيين كلمة السر"}),1===p&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"email",placeholder:"البريد الإلكتروني",className:"input-email-forgot",value:t,onChange:e=>o(e.target.value)}),a.jsx("button",{className:"input-button-forgot",onClick:async()=>{var e,a;try{await s.post("https://padel-hnj9.onrender.com/api/send-otp",{email:t}),u("تم إرسال رمز التحقق إلى بريدك الإلكتروني"),c(2)}catch(o){u((null==(a=null==(e=o.response)?void 0:e.data)?void 0:a.message)||"فشل في إرسال الرمز")}},children:"إرسال رمز التحقق"})]}),2===p&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",placeholder:"رمز التحقق",className:"input-otp-forgot",value:n,onChange:e=>r(e.target.value)}),a.jsx("button",{className:"input-button-forgot",onClick:async()=>{var e,a;try{await s.post("https://padel-hnj9.onrender.com/api/verify-otp",{email:t,otp:n}),u("تم التحقق بنجاح، يمكنك الآن تغيير كلمة السر"),c(3)}catch(o){u((null==(a=null==(e=o.response)?void 0:e.data)?void 0:a.message)||"رمز غير صحيح")}},children:"تحقق من الرمز"})]}),3===p&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"password",placeholder:"كلمة السر الجديدة",className:"input-password-forgot",value:l,onChange:e=>i(e.target.value)}),a.jsx("button",{className:"input-button-forgot",onClick:async()=>{var e,a;try{if(!l)return res.status(400).json({message:"من فضلك ادخل كلمة المرور"});await s.post("https://padel-hnj9.onrender.com/api/reset-password",{email:t,newPassword:l},{headers:{"Content-Type":"application/json"}}),u("تم تغيير كلمة السر بنجاح"),c(4)}catch(o){u((null==(a=null==(e=o.response)?void 0:e.data)?void 0:a.message)||"فشل في تغيير كلمة السر")}},children:"تغيير كلمة السر"})]}),d&&a.jsx("p",{className:"forgot-password-message",children:d})]})})};export{t as default};
