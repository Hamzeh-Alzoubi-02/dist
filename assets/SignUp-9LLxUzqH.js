import{u as e,r as t,j as s,L as n}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";const a=[];for(let d=0;d<256;++d)a.push((d+256).toString(16).slice(1));let r;const o=new Uint8Array(16);const i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function c(e,t,s){var n;if(i.randomUUID&&!e)return i.randomUUID();const c=(e=e||{}).random??(null==(n=e.rng)?void 0:n.call(e))??function(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(o)}();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=15&c[6]|64,c[8]=63&c[8]|128,function(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}(c)}const l=()=>{const a=e(),[r,o]=t.useState({name:"",email:"",password:"",deviceId:localStorage.getItem("deviceId")||""}),[i,l]=t.useState(!1),[d,p]=t.useState(!1),[m,u]=t.useState(""),[g,h]=t.useState(!1);t.useEffect((()=>{let e=localStorage.getItem("deviceId");e||(e=c(),localStorage.setItem("deviceId",e)),o((t=>({...t,deviceId:e})));const t="true"===localStorage.getItem("agreeTerms");l(t)}),[]);const f=e=>{o({...r,[e.target.name]:e.target.value})};return s.jsx("div",{className:"container-signup-container",children:s.jsxs("div",{className:"signup-container",children:[s.jsx("h1",{children:"إنشاء حساب جديد"}),s.jsxs("p",{className:"signup-description",children:["انضم إلى منصة ",s.jsx("strong",{children:"بادِل"})," وابدأ رحلتك المهنية في عالم التكنولوجيا. احصل على فرص مشاريع، تواصل مع طلاب ومطورين، وابدأ ببناء مستقبلك!"]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),u(""),r.email&&r.password&&r.name)if(r.password.length<6)u("كلمة المرور يجب أن تحتوي على 6 أحرف على الأقل.");else if(i){h(!0);try{const e=await fetch("https://padel-hnj9.onrender.com/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,agreeTerms:i})}),t=await e.json();e.ok?(localStorage.setItem("deviceId",t.deviceId||r.deviceId),p(!0),setTimeout((()=>{p(!1),a("/@!login")}),1500)):u(t.message||"يرجى المحاولة مرة اخرى")}catch(t){u("يرجى المحاولة مرة اخرى")}finally{h(!1)}}else u("يجب الموافقة على الشروط والأحكام للمتابعة.");else u("يرجى تعبئة كافة الحقول المطلوبة لإنشاء الحساب.")},className:"signup-form",children:[m&&s.jsx("p",{className:"error-message-signup",children:m}),s.jsx("input",{className:"signup-input",type:"text",name:"name",placeholder:"اسم المستخدم",value:r.name,onChange:f}),s.jsx("input",{className:"signup-input",type:"email",name:"email",placeholder:"البريد الإلكتروني",value:r.email,onChange:f,autoComplete:"email"}),s.jsx("input",{className:"signup-input",type:"password",name:"password",placeholder:"كلمة المرور",value:r.password,onChange:f,autoComplete:"new-password"}),s.jsx("div",{className:"signup-terms-confirm",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:i,onChange:e=>{l(e.target.checked),localStorage.setItem("agreeTerms",e.target.checked)}})," ","أوافق على"," ",s.jsx(n,{to:"/@!terms",target:"_blank",rel:"noopener noreferrer",children:"الشروط والأحكام"})," ","وسياسة الخصوصية"]})}),s.jsx(n,{to:"/@!login",className:"signup-link",children:"لديك حساب؟"}),s.jsx("div",{className:"signup-button-container",children:s.jsx("input",{type:"submit",value:g?"جاري إنشاء الحساب...":"إنشاء حساب",disabled:g})}),d&&s.jsx("p",{className:"success-message-signup",children:"تم التسجيل بنجاح!"})]})]})})};export{l as default};
