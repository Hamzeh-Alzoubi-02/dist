import{r as e,j as s,o as n,P as t,L as i,e as a}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";const r=e=>{const n=Math.floor(e),t=e%1>=.5?1:0,i=5-n-t;return s.jsxs("div",{className:"stars",children:[[...Array(n)].map(((e,n)=>s.jsx("span",{className:"star filled",children:"â˜…"},`full-${n}`))),1===t&&s.jsx("span",{className:"star half",children:"â˜†"}),[...Array(i)].map(((e,n)=>s.jsx("span",{className:"star",children:"â˜†"},`empty-${n}`)))]})};function c(){const[c,d]=e.useState([]),[o,l]=e.useState(1),[m,f]=e.useState(!0),[h,x]=e.useState(!1),j=e.useRef({hasMore:m,loadingMore:h,page:o}),[p,u]=e.useState(!0);e.useEffect((()=>{j.current={hasMore:m,loadingMore:h,page:o}}),[m,h,o]);const N=async e=>{try{const s=localStorage.getItem("token"),n=await a.get(`https://padel-hnj9.onrender.com/api/get-friends?page=${e}&limit=20`,{headers:{Authorization:`Bearer ${s}`}}),t=n.data.friends;t.length>0?(d((e=>{const s=new Set(e.map((e=>e._id))),n=t.filter((e=>!s.has(e._id)));return[...e,...n]})),f(n.data.hasMore)):f(!1)}catch(s){}finally{u(!1),x(!1)}};e.useEffect((()=>{N(1)}),[]),e.useEffect((()=>{const e=()=>{const{scrollTop:e,scrollHeight:s,clientHeight:n}=document.documentElement,{hasMore:t,loadingMore:i,page:a}=j.current;if(e+n>=s-10&&t&&!i){const e=a+1;l(e),N(e)}};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);return p?s.jsx("div",{className:"loading-container-Get-friends",children:s.jsx("div",{className:"spinner-Get-friends"})}):s.jsxs("div",{className:"App-Get-friends",children:[s.jsx(n,{}),s.jsx("div",{className:"friends-container-Get-friends",children:s.jsxs("div",{className:"friends-cont-Get-friends",children:[s.jsx("h1",{className:"friends-container-Get-friends-title",children:"Ù‚Ø§ÙŠÙ”Ù…Ø© Ø§Ù„Ø§ØµØ¯Ù‚Ø§Ø¡"}),c.length>0?s.jsx("div",{className:"friends-container-Get-friends",children:c.map((e=>{var n,a,c;const d=0===(o=e.ratings).length?0:o.reduce(((e,s)=>e+s.rating),0)/o.length;var o;return s.jsxs("div",{className:"friends-container-Get-friends-item",children:[s.jsx("div",{className:"friends-container-Get-friends-item-overlay"}),s.jsxs("div",{className:"friends-container-Get-friends-item-content",children:[s.jsx("img",{className:"friends-container-Get-friends-item-content-img",src:e.profileImage||t,alt:e.name,onError:e=>{e.target.src=t},loading:"lazy"}),s.jsxs(i,{className:"friends-container-Get-friends-item-content-name",to:`/@!users/${e._id}`,children:[e.name,s.jsx("span",{className:"friends-container-Get-friends-item-content-name-line"})]}),s.jsxs("div",{className:"friends-container-Get-friends-item-content-location",children:[s.jsx("i",{className:"fas fa-map-marker-alt",id:"location-icon"}),s.jsx("span",{className:"friends-container-Get-friends-item-content-location-text",children:(null==(n=e.personalInfo)?void 0:n.country)||"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ù„Ø¯"})]}),s.jsxs("div",{className:"friends-container-Get-friends-item-content-stats",children:[s.jsxs("div",{className:"friends-container-Get-friends-item-content-stats-item",children:[s.jsx("i",{className:"fas fa-graduation-cap",id:"education-icon"}),s.jsx("span",{className:"friends-container-Get-friends-item-content-stats-item-text",children:(null==(a=e.GeneralInfo)?void 0:a.Education)||"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ…"})]}),s.jsxs("div",{className:"friends-container-Get-friends-item-content-stats-item",children:[s.jsx("i",{className:"fas fa-briefcase",id:"work-icon"}),s.jsx("span",{className:"friends-container-Get-friends-item-content-stats-item-text",children:(null==(c=e.personalInfo)?void 0:c.occupation)||"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„"})]}),s.jsxs("div",{className:"friends-container-Get-friends-item-content-stats-item-line",children:[s.jsx("i",{className:"fas fa-star",id:"star-icon"}),s.jsx("div",{className:"friends-container-Get-friends-item-content-stats-item-line-stars",children:r(d)}),s.jsxs("span",{className:"friends-container-Get-friends-item-content-stats-item-line-text",children:["(",d.toFixed(1),")"]})]})]}),s.jsx("button",{className:"friends-container-Get-friends-item-content-button",children:s.jsxs(i,{to:`/@!chat/${e._id}`,className:"chat-link",children:["Ù…Ø±Ø³Ù„Ø© ",e.name," ðŸ’¬"]})})]})]},e._id)}))}):s.jsxs("div",{className:"friends-container-Get-friends-empty",children:[s.jsx("i",{className:"fas fa-user-friends",id:"empty-icon"}),s.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØµØ¯Ù‚Ø§Ø¡"})]})]})})]})}export{c as default};
