import{r as s,j as e,V as a,W as t,X as c,e as i}from"./index-epAGByur.js";import{M as n}from"./index-EzTomcpk.js";import"./vendor-MJHYApCa.js";n.setAppElement("#root");const l=()=>{const[l,d]=s.useState(!1),[o,r]=s.useState(!1),[m,h]=s.useState(""),[v,j]=s.useState(""),[x,u]=s.useState(!1),[N,p]=s.useState("");s.useEffect((()=>{(async()=>{r(!0);try{const s=await i.get("https://padel-hnj9.onrender.com/api/isActiveUser",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});d(s.data.isActiveUser)}catch(s){h("فشل في جلب حالة المستخدم.")}finally{r(!1)}})()}),[]),s.useEffect((()=>{p(l?"نشط":"غير نشط")}),[l]);const g=()=>{u(!1)};return e.jsxs("div",{className:"user-status-container",children:[e.jsxs("div",{className:"status-card",children:[e.jsxs("div",{className:"status-header",children:[e.jsx(a,{className:"user-icon-status"}),e.jsx("h2",{children:"حالة حساب المستخدم"})]}),e.jsxs("div",{className:"status-indicator-container",children:[e.jsx("div",{className:"status-badge "+(l?"active":"inactive"),children:N}),e.jsxs("div",{className:"status-info-account",children:[e.jsxs("div",{className:"info-item-active",children:[e.jsx(t,{className:"info-icon-active"}),e.jsx("span",{children:"الحساب النشط: يمكن للآخرين رؤية حسابك"})]}),e.jsxs("div",{className:"info-item-active",children:[e.jsx(t,{className:"info-icon-active"}),e.jsx("span",{children:"الحساب غير النشط: لا يمكن للآخرين رؤية حسابك"})]})]})]}),e.jsxs("button",{className:"toggle-button "+(l?"deactivate":"activate"),onClick:()=>{u(!0),h(""),j("")},disabled:o,children:[e.jsx(c,{className:"power-icon"}),o?"جاري التحديث...":l?"تعطيل الحساب":"تفعيل الحساب"]}),v&&e.jsx("div",{className:"message success",children:e.jsxs("div",{className:"message-content",children:[e.jsx("svg",{viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),v]})}),m&&e.jsx("div",{className:"message error",children:e.jsxs("div",{className:"message-content",children:[e.jsx("svg",{viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),m]})})]}),e.jsxs(n,{isOpen:x,onRequestClose:g,contentLabel:"تأكيد تغيير الحالة",className:"status-modal",overlayClassName:"modal-overlay-status",children:[e.jsxs("div",{className:"modal-header-status",children:[e.jsx("h3",{children:"تغيير حالة الحساب"}),e.jsx("button",{onClick:g,className:"close-modal-status",children:"×"})]}),e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"warning-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),e.jsxs("p",{className:"modal-title",children:["هل أنت متأكد من تغيير حالة الحساب إلى",e.jsx("span",{className:l?"active":"inactive",children:l?" نشط":" غير نشط"}),"؟"]}),e.jsx("p",{className:"modal-note",children:"قم بتغيير حالة حسابك لتحديث حالة المستخدم."})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"modal-btn-status confirm",onClick:async()=>{r(!0),h(""),j(""),u(!1);try{const s=(await i.put("https://padel-hnj9.onrender.com/api/isActiveUser",{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.isActiveUser;d(s),j(`تم تغيير حالة حسابك إلى ${s?"نشط":"غير نشط"} بنجاح`)}catch(s){h("فشل في تحديث حالة المستخدم. حاول مرة أخرى.")}finally{r(!1)}},children:"نعم، تغيير الحالة"}),e.jsx("button",{className:"modal-btn-status cancel",onClick:g,children:"إلغاء"})]})]})]})};export{l as default};
