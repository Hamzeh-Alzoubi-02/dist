import{r as e,e as s,j as a,o as r,P as i,L as t,a8 as n,a9 as l}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";function c(){const[c,d]=e.useState([]),[o,h]=e.useState(!0),[u,j]=e.useState(null),m=e.useCallback((async()=>{try{const e=localStorage.getItem("token"),a=await s.get("https://padel-hnj9.onrender.com/api/friend-requests",{headers:{Authorization:`Bearer ${e}`}});d(a.data.friendRequests)}catch(e){j("Failed to fetch friend requests")}finally{h(!1)}}),[]);e.useEffect((()=>{m()}),[m]);const x=async(e,a)=>{try{h(!0);const r=localStorage.getItem("token"),i=`https://padel-hnj9.onrender.com/api/${a}-friend-request/${e}`;await s.post(i,{},{headers:{Authorization:`Bearer ${r}`}}),d((s=>s.filter((s=>s.userId!==e))))}catch(r){j(`Failed to ${a} friend request`)}finally{h(!1)}};return o?a.jsx("p",{children:"Loading..."}):u?a.jsx("p",{children:u}):a.jsxs("div",{className:"requests-container",children:[a.jsx(r,{}),a.jsxs("div",{className:"requests-card",children:[a.jsxs("div",{className:"header",children:[a.jsx("h1",{children:"طلبات الصداقة"}),a.jsx("div",{className:"line"})]}),0===c.length?a.jsx("div",{className:"no-requests",children:a.jsx("p",{children:"لا يوجد طلبات"})}):a.jsx("div",{className:"requests-list",children:c.map((({userId:e,friend:s})=>a.jsxs("div",{className:"request-card",children:[a.jsxs("div",{className:"user-info",children:[a.jsx("div",{className:"profile-img",children:a.jsx("img",{src:(null==s?void 0:s.profileImage)?s.profileImage:i,alt:"Profile",onError:e=>e.target.src=i,loading:"lazy"})}),a.jsx("div",{className:"details",children:a.jsx("h3",{children:a.jsx(t,{to:`/@!users/${null==s?void 0:s._id}`,className:"user-link-name",children:(null==s?void 0:s.name)||"Unknown User"})})})]}),a.jsxs("div",{className:"action-buttons",children:[a.jsxs("button",{onClick:()=>x(e,"accept"),className:"accept",children:[a.jsx(n,{size:18}),"   تأكيد"]}),a.jsxs("button",{onClick:()=>x(e,"reject"),className:"reject",children:[a.jsx(l,{size:18}),"  حذف"]})]})]},e)))})]})]})}export{c as default};
