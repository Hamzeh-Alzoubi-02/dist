import{r as e,j as t,L as s,e as a}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";function c(){const[c,r]=e.useState([]),[l,n]=e.useState(!0),[o,i]=e.useState(null),[d,j]=e.useState(null);e.useEffect((()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await a.get("https://padel-hnj9.onrender.com/api/get-Projects-users-join",{headers:{Authorization:`Bearer ${e}`}});r(t.data.userProjects)}catch(e){i("حدث خطأ أثناء جلب المشاريع. الرجاء المحاولة لاحقًا.")}finally{n(!1)}})()}),[]);return l?t.jsxs("div",{className:"loading-center-display-projects",children:[t.jsx("div",{className:"spinner-loader-projects"}),t.jsx("p",{children:"جاري التحميل..."})]}):o?t.jsx("p",{children:o}):t.jsxs("div",{className:"container-get-projects-users-page",children:[t.jsx("h1",{className:"container-get-projects-users-page-title",children:"مشاريعي المشتركة مع الأخرين"}),t.jsxs("div",{className:"container-get-projects-users-page-projects",children:[0===c.length?t.jsx("p",{children:"لا توجد مشاريع لعرضها حالياً."}):c.map(((e,a)=>{var c,r;return t.jsxs("div",{className:"container-get-projects-users-page-project-card",children:[e.ImgProjects&&t.jsx("img",{src:e.ImgProjects,alt:"صورة المشروع",className:"container-get-projects-users-page-project-card-image",loading:"lazy"}),t.jsx("h2",{className:"project-name-text-page",children:e.projectName}),t.jsx("p",{className:"project-description-text-page",children:e.projectDescription}),(null==(c=e.members)?void 0:c.length)>0&&t.jsxs("div",{className:"members-container-page-project",children:[t.jsx("h3",{className:"members-title-page-project",children:"الأعضاء:"}),t.jsx("ul",{className:"members-list-page-project",children:e.members.map(((e,s)=>t.jsx("li",{children:e.name},s)))})]}),(null==(r=e.techStack)?void 0:r.length)>0&&t.jsxs("div",{className:"tech-stack-container-page-project",children:[t.jsx("h3",{className:"tech-stack-title",children:"التقنيات المستخدمة:"}),t.jsx("p",{className:"tech-stack-list",children:e.techStack.join(", ")})]}),t.jsxs("div",{className:"project-actions",children:[t.jsx("button",{className:"delete-project-button",onClick:()=>j(e._id),children:"حذف المشروع"}),t.jsx(s,{to:`/edit-project/${e._id}`,className:"edit-project-button",children:"تعديل المشروع"})]})]},a)})),d&&t.jsx("div",{className:"modal-overlay-delete-project-page-join",children:t.jsxs("div",{className:"modal-content-delete-project-page-join",children:[t.jsx("p",{children:"هل أنت متأكد من حذف هذا المشروع؟"}),t.jsxs("div",{className:"modal-buttons-delete-project-page-join",children:[t.jsx("button",{className:"confirm-button-delete-project-page-join",onClick:()=>(async e=>{try{const t=localStorage.getItem("token");await a.delete(`https://padel-hnj9.onrender.com/api/delete-project-user/${e}`,{headers:{Authorization:`Bearer ${t}`}}),r((t=>t.filter((t=>t._id!==e))))}catch(t){}finally{j(null)}})(d),children:"نعم"}),t.jsx("button",{className:"cancel-button-delete-project-page-join",onClick:()=>j(null),children:"لا"})]})]})})]})]})}export{c as default};
