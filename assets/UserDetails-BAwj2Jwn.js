import{r as e,j as s,e as a,$ as r,P as i,L as l}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";
/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=(...e)=>e.filter(((e,s,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===s)).join(" ").trim()
/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */;var t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c=e.forwardRef((({color:s="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:d,...o},m)=>e.createElement("svg",{ref:m,...t,width:a,height:a,stroke:s,strokeWidth:i?24*Number(r)/Number(a):r,className:n("lucide",l),...o},[...d.map((([s,a])=>e.createElement(s,a))),...Array.isArray(c)?c:[c]]))),d=(s,a)=>{const r=e.forwardRef((({className:r,...i},l)=>{return e.createElement(c,{ref:l,iconNode:a,className:n(`lucide-${t=s,t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...i});var t}));return r.displayName=`${s}`,r},o=d("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),m=d("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),h=d("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),u=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),j=({friendId:r})=>{const[i,l]=e.useState(null),[n,t]=e.useState(!1);e.useEffect((()=>{(async()=>{try{const e=localStorage.getItem("token"),s=await a.get(`https://padel-hnj9.onrender.com/api/friend-request/status/${r}`,{headers:{Authorization:`Bearer ${e}`}});l(s.data.status)}catch(e){}})()}),[r]);return s.jsx("div",{className:"friend-request-container",children:"accepted"===i?s.jsx("button",{onClick:async()=>{t(!0);try{const e=localStorage.getItem("token");await a.post(`https://padel-hnj9.onrender.com/api/unfriend/${r}`,{},{headers:{Authorization:`Bearer ${e}`}}),l(null)}catch(e){}t(!1)},disabled:n,className:"friend-btn unfriend-btn",children:n?s.jsx(o,{className:"animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(m,{className:"btn-icon"}),s.jsx("span",{children:"إلغاء الصداقة"})]})}):s.jsx("button",{onClick:async()=>{t(!0);try{const e=localStorage.getItem("token"),s=await a.post(`https://padel-hnj9.onrender.com/api/send-friend-request/${r}`,{},{headers:{Authorization:`Bearer ${e}`}});l(s.data.status)}catch(e){}t(!1)},disabled:n,className:"friend-btn "+("pending"===i?"cancel-btn":"add-btn"),children:n?s.jsx(o,{className:"animate-spin"}):"pending"===i?s.jsxs(s.Fragment,{children:[s.jsx(u,{className:"btn-icon"}),s.jsx("span",{children:"إلغاء "})]}):s.jsxs(s.Fragment,{children:[s.jsx(h,{className:"btn-icon"}),s.jsx("span",{children:"إضافة صديق"})]})})})};
/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function x(){const{id:n}=r(),[t,c]=e.useState(null),[d,o]=e.useState(0),[m,h]=e.useState(""),[u,x]=e.useState(!0),[p,N]=e.useState(null),[f,v]=e.useState(null),[g,y]=e.useState(!1),[k,b]=e.useState(""),[A,$]=e.useState(null);e.useEffect((()=>{(async()=>{try{const e=localStorage.getItem("token"),s=await a.get(`https://padel-hnj9.onrender.com/api/users/${n}`,{headers:{Authorization:`Bearer ${e}`}});v(s.data.user.isActiveUser),c(s.data.user)}catch(e){N("حدث خطاء في جلب بيانات المستخدم")}finally{x(!1)}})()}),[n]),e.useEffect((()=>{(async()=>{try{const e=localStorage.getItem("token"),s=await a.get(`https://padel-hnj9.onrender.com/api/usersRatings/${n}`,{headers:{Authorization:`Bearer ${e}`}});$(s.data)}catch(e){N("حدث خطاء في جلب التقييمات")}})()}),[n]);const w={skills:"المهارات",socialMedia:"وسائل التواصل",Education:"التعليم",workExperience:"خبرات العمل"},I=(e,s)=>{e.target.src=s};if(u)return s.jsx("div",{className:"loading-user-details",children:s.jsxs("div",{className:"spinner-with-text",children:[s.jsx("div",{className:"spinner-user-details"}),s.jsx("span",{children:"جارٍ تحميل التفاصيل"})]})});if(p)return s.jsx("div",{className:"error-user-details",children:p});const S=()=>{y(!g)};return f?s.jsxs("div",{className:"user-details-container",children:[s.jsxs("div",{className:"cover-section-user-details",children:[t.coverImage?s.jsx("img",{loading:"lazy",src:t.coverImage,alt:"Cover",className:"cover-image-user-details"}):s.jsx("div",{className:"cover-image-user-details empty-cover"}),s.jsxs("div",{className:"profile-header-user-details",children:[s.jsx("div",{className:"profile-image-wrapper-user-details",onClick:S,children:s.jsx("img",{className:"profile-image-user-details",src:t.profileImage?t.profileImage:i,alt:"Profile",onError:e=>I(e,i),loading:"lazy"})}),s.jsxs("div",{className:"profile-info-user-details",children:[s.jsx("h2",{className:"profile-name-user-details",children:t.name}),s.jsxs("p",{className:"profile-level-user-details",children:["المستوى: ",(C=t.level,{"Senior Dev":"مطور خبير","Mid-Level Dev":"مطور متوسط","Junior Dev":"مطور مبتدئ",Beginner:"مبتدئ تمامًا"}[C]||"غير محدد")]})]})]})]}),s.jsxs("div",{className:"action-buttons-user-details",children:[s.jsx(j,{friendId:t._id}),s.jsxs("div",{className:"profile-links",children:[s.jsx(l,{to:`/post-user/${t._id}`,className:"profile-link-user-details",children:s.jsx("span",{children:"عرض المنشورات"})}),s.jsx(l,{to:`/FrindUser/${t._id}`,className:"profile-link-user-details",children:s.jsx("span",{children:"عرض المتابعين"})}),s.jsx(l,{to:`/rate-user/${t._id}`,className:"profile-link-user-details",children:s.jsx("span",{children:"عرض تقييمات"})})]})]}),s.jsxs("div",{className:"user-details-grid",children:[s.jsxs("div",{className:"personal-info-card-user-details",children:[s.jsxs("div",{className:"card-header-user-details",children:[s.jsx("i",{className:"fas fa-user-circle"}),s.jsx("h3",{children:"معلومات شخصية"})]}),s.jsx("div",{className:"info-grid-user-details",children:(null==t?void 0:t.personalInfo)&&Object.values(t.personalInfo).some((e=>Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e&&""!==e))?Object.entries(t.personalInfo).map((([e,a],r)=>{return s.jsxs("div",{className:"info-item-user-details",children:[s.jsx("div",{className:"info-label",children:"birthday"===e?"تاريخ الميلاد":"occupation"===e?"المهنة":"phoneNumber"===e?"رقم الهاتف":"country"===e?"الدولة":"gender"===e?"الجنس":"AboutMe"===e?"نبذة عني":e}),s.jsx("div",{className:"info-value",children:"birthday"===e?a?(i=a,new Date(i).toLocaleDateString("EG",{day:"numeric",month:"numeric",year:"numeric"})):s.jsx("span",{className:"empty-value",children:"لا توجد بيانات"}):"gender"===e?"Male"===a?"ذكر":"Female"===a?"أنثى":s.jsx("span",{className:"empty-value",children:"لا توجد بيانات"}):"occupation"===e?Array.isArray(a)&&a.length>0?s.jsx("div",{className:"occupation-tags",children:a.map(((e,a)=>s.jsx("span",{className:"occupation-tag",children:e||""},a)))}):s.jsx("span",{className:"empty-value",children:"لا توجد بيانات"}):a||s.jsx("span",{className:"empty-value",children:"لا توجد بيانات"})})]},r);var i})):s.jsx("div",{className:"no-info-message",children:"لا توجد بيانات"})})]}),s.jsxs("div",{className:"general-info-card",children:[s.jsxs("div",{className:"card-header-user-details",children:[s.jsx("i",{className:"fas fa-info-circle"}),s.jsx("h3",{children:"معلومات عامة"})]}),(null==t?void 0:t.GeneralInfo)&&Object.entries(t.GeneralInfo).some((([e,s])=>"Badges"!==e&&(Array.isArray(s)&&s.length>0||"object"==typeof s&&null!==s&&Object.keys(s).length>0||"object"!=typeof s&&s)))?Object.entries(t.GeneralInfo).map((([e,a],r)=>"Badges"!==e?s.jsxs("div",{className:"info-section-user-details",children:[s.jsxs("div",{className:"section-header-user-details",children:[s.jsx("i",{className:"fas fa-tag"}),s.jsx("h4",{children:w[e]||e})]}),s.jsx("div",{className:"section-content",children:a?"socialMedia"===e?s.jsx("div",{className:"social-grid-user-details",children:Object.entries(a).map((([e,a],r)=>a&&s.jsxs("a",{className:"social-card-user-details",href:a,target:"_blank",rel:"noopener noreferrer",children:[s.jsx("p",{className:"social-icon-user-details",children:(null==e?void 0:e.charAt(0).toUpperCase())+(null==e?void 0:e.slice(1,2))}),s.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)})]},r)))}):"skills"===e&&Array.isArray(a)?s.jsx("div",{className:"skills-grid-user-details",children:a.map(((e,a)=>s.jsx("div",{className:"skill-tag-user-details",children:e},a)))}):s.jsx("p",{className:"info-text",children:a}):s.jsxs("div",{className:"empty-state",children:[s.jsx("i",{className:"fas fa-database"}),s.jsx("span",{children:"لا توجد بيانات"})]})})]},r):null)):s.jsxs("div",{className:"empty-state",children:[s.jsx("i",{className:"fas fa-database"}),s.jsx("span",{children:"لا توجد بيانات"})]})]}),s.jsxs("div",{className:"rating-section-user-details",children:[s.jsxs("div",{className:"rating-summary-card-user-details",children:[s.jsxs("div",{className:"card-header-user-details",children:[s.jsx("i",{className:"fas fa-star"}),s.jsx("h3",{children:"التقييم العام"})]}),s.jsxs("div",{className:"rating-display-user-details",children:[s.jsx("div",{className:"average-rating-user-details",children:s.jsxs("span",{children:[(null==A?void 0:A.averageRating)?A.averageRating:0," ","/ 5"]})}),s.jsx("div",{className:"stars-container-user-details",children:(e=>{const a=Math.floor(e),r=e%1!=0,i=5-a-(r?1:0);return s.jsxs("div",{className:"stars",children:[Array(a).fill("★").map(((e,a)=>s.jsx("span",{className:"full-star",children:"★"},a))),r&&s.jsx("span",{className:"half-star",children:"☆"}),Array(i).fill("☆").map(((e,a)=>s.jsx("span",{className:"empty-star",children:"☆"},a)))]})})((null==A?void 0:A.averageRating)||0)}),s.jsxs("p",{className:"rating-count",children:["(تم التقييم من ",(null==A?void 0:A.countRatings)||0," مستخدم)"]})]})]}),s.jsxs("div",{className:"rating-form",children:[s.jsxs("div",{className:"card-header-user-details",children:[s.jsx("i",{className:"fas fa-edit"}),s.jsx("h3",{children:"أضف تقييمك"})]}),s.jsxs("div",{className:"form-note",children:[s.jsx("i",{className:"fas fa-info-circle"}),s.jsx("span",{children:"ملاحظة: لا يتم عرض هويتك في التقييمات"})]}),s.jsxs("div",{className:"rating-inputs",children:[s.jsx("div",{className:"skill-input-container",children:s.jsx("input",{type:"text",placeholder:"أدخل المهارة التي تريد تقييمها",value:m,onChange:e=>{h(e.target.value)},className:"skill-input"})}),s.jsxs("div",{className:"rating-stars-container",children:[s.jsx("div",{className:"stars-selector-container-user",children:[1,2,3,4,5].map((e=>s.jsx("button",{onClick:()=>(e=>{o(e)})(e),className:"star-button "+(e<=d?"active":""),children:"★"},e)))}),s.jsx("div",{className:"rating-label",children:d>0?`قمت بتقييم ${d} نجوم`:"اختر تقييمك"})]}),k&&s.jsx("div",{className:"DoneRating-user",children:k})]}),s.jsxs("button",{onClick:async()=>{if(m&&0!==d)try{const e=localStorage.getItem("token");await a.post(`https://padel-hnj9.onrender.com/api/add-rating/${n}`,{skill:m,rating:d,ratedBy:t._id},{headers:{Authorization:`Bearer ${e}`}}),h(""),o(0),b("تم تقييمك بنجاح")}catch(e){}},className:"submit-button",disabled:!m||0===d,children:[s.jsx("i",{className:"fas fa-paper-plane"}),s.jsx("span",{children:"إرسال التقييم"})]})]})]})]}),g&&s.jsx("div",{className:"profile-image-modal-user",onClick:S,children:s.jsxs("div",{className:"modal-content-user-image-details",onClick:e=>e.stopPropagation(),children:[s.jsx("img",{className:"modal-image-user-image-details",src:t.profileImage?t.profileImage:i,alt:"Profile",loading:"lazy",onError:e=>I(e,i)}),s.jsx("button",{className:"close-button-user-image-details",onClick:S,children:s.jsx("i",{children:"X"})})]})})]}):s.jsxs("div",{className:"inactive-user",children:[s.jsx("i",{className:"fas fa-user-slash"}),s.jsx("h2",{children:"المستخدم غير مفعل"}),s.jsx("p",{children:"لا يمكن عرض معلومات هذا المستخدم حالياً"})]});var C}export{x as default};
