import{r as e,j as a,o as l,af as s,a7 as t,e as i}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";const n=()=>{const[n,c]=e.useState(""),[r,m]=e.useState(""),[o,u]=e.useState(""),[p,d]=e.useState(""),[h,b]=e.useState([]),[j,x]=e.useState(""),[g,v]=e.useState(!0),[N,f]=e.useState(null),[y,S]=e.useState(null),[k,C]=e.useState([]),[w,z]=e.useState(""),[D,L]=e.useState(""),[O,R]=e.useState(null),[U,F]=e.useState(null),[I,T]=e.useState(""),[E,J]=e.useState("");e.useEffect((()=>{if(E){const e=setTimeout((()=>J("")),4e3);return()=>clearTimeout(e)}}),[E]);return a.jsxs("div",{className:"create-project-form",children:[a.jsx(l,{}),a.jsxs("div",{className:"create-project-container",children:[a.jsx("h2",{children:"إنشاء مشروع جديد"}),a.jsx("span",{className:"note-public",children:"* جميع الملفات مطلوبة"}),a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!N)return void T("يرجى تحميل صورة الغلاف");const a=new FormData;a.append("coverImage",N),a.append("title",n),a.append("description",r),a.append("goals",o),a.append("media",j),a.append("isPublic",g),a.append("techStack",JSON.stringify(h)),k.forEach((e=>{a.append("memberImages",e.image)}));const l=k.map((({name:e,link:a})=>({name:e,link:a})));if(a.append("members",JSON.stringify(l)),n&&r&&o&&h&&k)try{const e=localStorage.getItem("token");await i.post("https://padel-hnj9.onrender.com/api/create-join-project",a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${e}`}});J("تم إنشاء المشروع بنجاح!"),c(""),m(""),u(""),b([]),d(""),x(""),v(!0),f(null),S(null),C([]),z(""),L(""),R(null),F(null)}catch(s){}else T("يرجى إكمال البيانات")},children:[a.jsxs("div",{className:"form-group-public",children:[a.jsx("label",{children:"عنوان المشروع"}),a.jsx("input",{type:"text",value:n,onChange:e=>c(e.target.value),placeholder:"أدخل عنوان المشروع"})]}),a.jsxs("div",{className:"form-group-public",children:[a.jsx("label",{children:"الوصف"}),a.jsx("textarea",{value:r,onChange:e=>m(e.target.value),placeholder:"أدخل وصف المشروع"})]}),a.jsxs("div",{className:"form-group-public",children:[a.jsx("label",{children:"الأهداف"}),a.jsx("input",{type:"text",value:o,onChange:e=>u(e.target.value),placeholder:"حدد أهداف المشروع (اختياري)"})]}),a.jsxs("div",{className:"form-group-public",children:[a.jsx("label",{children:"إضافة عضو جديد"}),a.jsxs("div",{className:"member-inputs-container-public",children:[a.jsx("input",{type:"text",value:w,placeholder:"اسم العضو",onChange:e=>z(e.target.value)}),a.jsx("input",{type:"text",value:D,placeholder:"رابط لينكدإن أو رابط آخر",onChange:e=>L(e.target.value)}),a.jsxs("div",{className:"form-group-public member-image-upload",children:[a.jsxs("label",{htmlFor:"member-image",className:"icon-upload-label",children:[a.jsx(s,{size:20})," رفع صورة العضو"]}),a.jsx("input",{id:"member-image",type:"file",style:{display:"none"},onChange:e=>{const a=e.target.files[0];a&&(R(a),F(URL.createObjectURL(a)))},accept:"image/*"}),U&&a.jsx("img",{src:U,loading:"lazy",alt:"معاينة صورة العضو",className:"member-image-preview"})]}),a.jsx("button",{className:"add-button",onClick:e=>{e.preventDefault(),w.trim()&&D.trim()&&O&&(C([...k,{name:w.trim(),link:D.trim(),image:O,preview:U}]),z(""),L(""),R(null),F(null))},disabled:!w.trim()||!D.trim()||!O,type:"button",children:"إضافة عضو"})]}),k.length>0&&a.jsx("ul",{className:"members-list",children:k.map(((e,l)=>a.jsx("li",{className:"member-card-container",children:a.jsxs("div",{className:"member-card",children:[a.jsx("img",{src:e.preview,alt:e.name,width:"50",height:"50",loading:"lazy",className:"member-img"}),a.jsx("div",{className:"member-info-user-name",children:a.jsx("h4",{children:e.name})}),a.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"member-link",children:e.link}),a.jsx("button",{className:"remove-member-btn",onClick:()=>(e=>{C(k.filter(((a,l)=>l!==e)))})(l),title:"حذف العضو",children:"×"})]})},l)))})]}),a.jsxs("div",{className:"form-group-public",children:[a.jsx("label",{children:"التقنيات"}),a.jsxs("div",{className:"tech-stack-input-container-public",children:[a.jsx("input",{type:"text",value:p,onChange:e=>{d(e.target.value)},placeholder:"أضف تقنية"}),a.jsx("button",{className:"add-button",onClick:e=>{e.preventDefault();const a=p.trim();a&&!h.includes(a)&&(b([...h,a]),d(""))},disabled:!p.trim(),type:"button",children:"إضافة"})]}),h.length>0&&a.jsx("ul",{className:"tech-tag-list",children:h.map(((e,l)=>a.jsxs("li",{className:"tech-stack-item",children:[e,a.jsx("button",{className:"remove-tech-btn",onClick:()=>(e=>{b(h.filter(((a,l)=>l!==e)))})(l),title:"حذف التقنية",children:"×"})]},l)))})]}),a.jsxs("div",{className:"form-group-public",children:[a.jsx("label",{children:"رابط المشروع"}),a.jsx("input",{className:"url-input-public",type:"url",value:j,onChange:e=>x(e.target.value),placeholder:"أدخل رابط المشروع (اختياري)"})]}),a.jsx("div",{className:"form-group-public checkbox-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:g,onChange:()=>v(!g)}),"المشروع عام"]})}),a.jsxs("div",{className:"form-group-public cover-image-upload",children:[a.jsx("label",{children:"صورة غلاف المشروع"}),a.jsxs("label",{htmlFor:"cover-image",className:"icon-upload-label cover-upload-label",children:[a.jsx(t,{size:30}),"اختر صورة الغلاف"]}),a.jsx("input",{id:"cover-image",type:"file",style:{display:"none"},onChange:e=>{const a=e.target.files[0];a&&(f(a),S(URL.createObjectURL(a)))},accept:"image/*",className:"cover-image-perview-public"}),y&&a.jsx("img",{src:y,loading:"lazy",alt:"معاينة صورة الغلاف",className:"cover-image-preview-public"})]}),I&&a.jsx("div",{className:"not-success-message-public",children:I}),a.jsx("button",{className:"cancel-btn",onClick:()=>{c(""),m(""),u(""),b([]),d(""),x(""),v(!0),f(null),S(null),C([]),z(""),L(""),R(null),F(null)},children:"إلغاء"}),a.jsx("button",{className:"submit-btn",type:"submit",children:"إنشاء المشروع"}),E&&a.jsx("div",{className:"success-message-public",children:E})]})]})]})};export{n as default};
