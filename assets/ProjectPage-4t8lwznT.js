import{$ as s,r as e,j as c,L as a,f as i,k as r}from"./index-epAGByur.js";import"./vendor-MJHYApCa.js";i.extend(r),i.locale("ar");const n=()=>{var r,n,l,t,o;const{id:d}=s(),[m,j]=e.useState(null),[h,x]=e.useState(!0),[N,v]=e.useState(null),[p,u]=e.useState(!1),[b,g]=e.useState(""),[k,f]=e.useState("overview"),[C,S]=e.useState(""),[w,I]=e.useState(0);e.useEffect((()=>{if(""!==C){const s=setTimeout((()=>S("")),5e3);return()=>clearTimeout(s)}}),[C]),e.useEffect((()=>{const s=localStorage.getItem("token");x(!0),fetch(`https://padel-hnj9.onrender.com/api/projectJoin/${d}`,{headers:{Authorization:`Bearer ${s}`}}).then((s=>s.json())).then((s=>{s.error?v(s.error):j(s),x(!1)})).catch((s=>{v("حدث خطأ أثناء تحميل المشروع: "+s.message),x(!1)}))}),[d]);const P=s=>{g(s),u(!0)},z=()=>{u(!1),g("")};if(h)return c.jsxs("div",{className:"project-loading",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"جارٍ تحميل المشروع..."})]});if(N)return c.jsx("div",{className:"project-error",children:N});if(!m)return c.jsxs("div",{className:"project-error",children:[c.jsx("h2",{children:"لم يتم العثور على المشروع"}),c.jsx("p",{children:"المشروع الذي تبحث عنه غير موجود أو تم حذفه."}),c.jsx(a,{to:"/public-projects",className:"back-button",children:"العودة إلى المشاريع"})]});const $=s=>{I((s=>s+1)),S("غير متاح حاليا.")};return c.jsxs("div",{className:"project-page-container",children:[c.jsxs("nav",{className:"project-nav",children:[C&&c.jsx("p",{className:"soon-text",children:C}),c.jsxs("div",{className:"nav-content",children:[c.jsx(a,{to:"/@!Jointprojects",className:"back-button",children:"← العودة للمشاريع"}),c.jsxs("div",{className:"nav-actions",children:[c.jsx("button",{onClick:$,className:"share-btn",children:"مشاركة"}),c.jsx("button",{onClick:$,className:"join-btn",children:"انضم للمشروع"})]})]})]}),c.jsx("div",{className:"project-header",children:c.jsxs("div",{className:"project-hero",children:[c.jsx("img",{src:m.ImgProjects,alt:"صورة المشروع",onClick:()=>P(m.ImgProjects)}),c.jsxs("div",{className:"project-meta",children:[c.jsx("h1",{children:m.projectName}),c.jsxs("div",{className:"project-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"icon",children:"👥"}),c.jsxs("span",{className:"value",children:[(null==(r=m.members)?void 0:r.length)||0," أعضاء"]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"icon",children:"📅"}),c.jsxs("span",{className:"value",children:["منذ ",i(m.createdAt).fromNow()]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"icon",children:"🏷️"}),c.jsx("span",{className:"value",children:"true"===m.isPublic?"خاص":"عام"})]})]})]})]})}),c.jsxs("div",{className:"project-tabs",children:[c.jsx("button",{className:"tab-btn-overview "+("overview"===k?"active":""),onClick:()=>f("overview"),children:"نظرة عامة"}),c.jsx("button",{className:"tab-btn-overview "+("members"===k?"active":""),onClick:()=>f("members"),children:"الأعضاء"}),c.jsx("button",{className:"tab-btn-overview "+("resources"===k?"active":""),onClick:()=>f("resources"),children:"الموارد"}),c.jsx("button",{className:"tab-btn-overview "+("discussion"===k?"active":""),onClick:()=>f("discussion"),children:"المناقشات"})]}),c.jsxs("div",{className:"project-content",children:["overview"===k&&c.jsxs(c.Fragment,{children:[c.jsxs("section",{className:"project-section",children:[c.jsx("h2",{children:"وصف المشروع"}),c.jsx("p",{className:"description",children:m.projectDescription})]}),(null==(n=m.goals)?void 0:n.length)>0&&c.jsxs("section",{className:"project-section",children:[c.jsx("h2",{children:"🎯 أهداف المشروع"}),c.jsx("ul",{className:"goals",children:m.goals.map(((s,e)=>c.jsx("li",{children:s},e)))})]}),(null==(l=m.techStack)?void 0:l.length)>0&&c.jsxs("section",{className:"project-section",children:[c.jsx("h2",{children:"🛠️ التقنيات المستخدمة"}),c.jsx("div",{className:"tech-badges",children:m.techStack.map(((s,e)=>c.jsx("span",{className:"tech-badge",children:s},e)))})]})]}),"members"===k&&(null==(t=m.members)?void 0:t.length)>0&&c.jsxs("section",{className:"project-section",children:[c.jsx("h2",{children:"👥 فريق المشروع"}),c.jsx("div",{className:"members-grid",children:m.members.map((s=>c.jsxs("div",{className:"member-card",children:[c.jsx("div",{className:"member-avatar",onClick:()=>P(s.image),children:c.jsx("img",{src:s.image,alt:s.name,loading:"lazy"})}),c.jsxs("div",{className:"member-info",children:[c.jsx("h3",{children:s.name}),c.jsx("p",{className:"member-role",children:s.role||"عضو في المشروع"}),s.link&&c.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"member-link",children:"LinkedIn"})]})]},s._id)))})]}),"resources"===k&&(null==(o=m.media)?void 0:o.length)>0&&c.jsxs("section",{className:"project-section",children:[c.jsx("h2",{children:"📎 موارد المشروع"}),c.jsx("div",{className:"resources-grid",children:m.media.map(((s,e)=>c.jsxs("div",{className:"resource-card",children:[c.jsx("div",{className:"resource-icon",children:"🔗"}),c.jsxs("div",{className:"resource-info",children:[c.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"resource-link",children:["رابط المشروع ",e+1]}),c.jsx("div",{className:"resource-desc",children:"رابط خارجي للمشروع"})]})]},e)))})]}),"discussion"===k&&c.jsxs("section",{className:"project-section",children:[c.jsx("h2",{children:"💬 مناقشات المشروع"}),c.jsxs("div",{className:"discussion-placeholder",children:[c.jsx("p",{children:"لا توجد مناقشات بعد. كن أول من يبدأ النقاش!"}),c.jsx("button",{onClick:$,className:"start-discussion-btn",children:"ابدأ مناقشة جديدة"})]})]})]}),c.jsxs("div",{className:"project-sidebar",children:[c.jsxs("div",{className:"sidebar-card",children:[c.jsx("h3",{children:"حالة المشروع"}),c.jsxs("div",{className:"project-status",children:[c.jsx("span",{className:"status-indicator active"}),c.jsx("span",{children:"نشط"})]})]}),c.jsxs("div",{className:"sidebar-card",children:[c.jsx("h3",{children:"التحكم بالمشروع"}),c.jsx("button",{onClick:$,className:"sidebar-action-btn",children:"تعديل المشروع"}),c.jsx("button",{onClick:$,className:"sidebar-action-btn",children:"إضافة عضو"}),c.jsx("button",{onClick:$,className:"sidebar-action-btn",children:"إدارة الصلاحيات"})]})]}),p&&c.jsx("div",{className:"modal-backdrop",onClick:z,children:c.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[c.jsx("img",{src:b,alt:"صورة مكبرة",className:"modal-image",loading:"lazy"}),c.jsx("span",{className:"close-modal-btn",onClick:z,children:"×"})]})})]})};export{n as default};
